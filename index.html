<meta name='viewport' content='width=device-width, initial-scale=1'/>
<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movie & Game Drive</title>
<style>
:root {
  --bg-color: #f1f5f9;
  --text-color: #000;
  --folder-bg: #0ea5e9;
  --folder-text: #fff;
  --payment-bg: #fef3c7;
  --btn-bg: #22c55e;
  --ai-bg: #fff;
  --ai-text: #000;
}

/* Dark Theme Variables */
body.dark {
  --bg-color: #121212;
  --text-color: #e0e0e0;
  --folder-bg: #1e40af;
  --folder-text: #fff;
  --payment-bg: #1f2937;
  --btn-bg: #16a34a;
  --ai-bg: #1f2937;
  --ai-text: #fff;
}

body{
  font-family:Arial;
  background:var(--bg-color);
  color:var(--text-color);
  padding:20px;
  transition: all 0.3s;
}
h1{text-align:center}
.folder{
  background:var(--folder-bg);
  color:var(--folder-text);
  padding:8px;
  margin:6px 0;
  border-radius:6px;
  cursor:pointer;
  display:none;
  transition: all 0.3s;
}
.subfolder{display:none;margin-left:20px}
.link{display:none;margin:6px 0}
.payment-box{
  background:var(--payment-bg);
  padding:15px;
  border-radius:10px;
  text-align:center;
  margin-bottom:20px;
  transition: all 0.3s;
}
button{
  background:var(--btn-bg);
  border:none;
  color:white;
  padding:8px 14px;
  border-radius:6px;
  cursor:pointer;
  transition: all 0.3s;
}
input{padding:8px;width:180px}
.show-pass-btn{background:#3b82f6;color:#fff;border:none;padding:8px;border-radius:6px}
a{text-decoration:none;font-weight:bold;color:inherit}
#searchBox{display:none;margin:15px 0;padding:8px;width:95%;}

/* AI Button */
#aiBtn{
  position:fixed;
  bottom:20px;
  right:20px;
  width:60px;
  height:60px;
  border-radius:50%;
  background:var(--btn-bg);
  color:#fff;
  font-size:18px;
  border:none;
  cursor:pointer;
  display:none;
  z-index:999;
}

/* AI Box */
#aiBox{
  position:fixed;
  bottom:90px;
  right:20px;
  width:300px;
  background:var(--ai-bg);
  color:var(--ai-text);
  border-radius:12px;
  padding:12px;
  box-shadow:0 0 15px rgba(0,0,0,.2);
  display:none;
  z-index:999;
  transition: all 0.3s;
}
#aiBox input{
  width:100%;
  margin-bottom:8px;
  padding:6px;
}
#aiResult{
  font-size:14px;
  max-height:300px;
  overflow:auto;
}

/* Theme button */
#themeBtn{
  position:fixed;
  top:20px;
  right:20px;
  padding:8px 12px;
  border:none;
  border-radius:6px;
  background:#6b7280;
  color:white;
  cursor:pointer;
  z-index:1000;
}
</style>
</head>
<body>

<h1>📂 SIAM</h1>

<button id="themeBtn">Theme</button>

<div class="payment-box" id="paymentBox">
<h3>🔐 সাবস্ক্রিপশন</h3>
bKash / Nagad: 01775487928 <br>
Amount: 5 টাকা <br><br>

<input type="password" id="passInput" placeholder="পাসওয়ার্ড দিন">
<button class="show-pass-btn" onclick="togglePassword()">👁</button><br><br>
<button onclick="unlockAll()">Access</button>

<hr>

<h4>📧 পাসওয়ার্ড পেতে ইমেইল দিন</h4>
<form id="emailForm">
<input type="email" name="email" required placeholder="আপনার ইমেইল">
<br><br>
<button type="submit">Send</button>
</form>
</div>

<!-- Search bar -->
<input type="text" id="searchBox" placeholder="🔍 Movie / Series খুঁজুন..." onkeyup="searchItem()">

<!-- Movies -->
<div class="folder" onclick="toggle('movies')">🎬 মুভি</div>
<div class="subfolder" id="movies">

  <div class="folder" onclick="toggle('m1')">🎬 Chainsaw Man The Movie Reze Arc</div>
  <div class="subfolder" id="m1">
    <div class="link unlock">
      <a href="https://drive.google.com/file/d/1iGwkL4uV_bWVWlUMjtw7ZQ32wmr4W8c1/preview?usp=sharing">▶ ভিডিও দেখো</a> | 
      <a href="https://drive.google.com/file/d/1iGwkL4uV_bWVWlUMjtw7ZQ32wmr4W8c1/view?usp=sharing">⬇ ডাউনলোড</a>
    </div>
  </div>

  <div class="folder" onclick="toggle('m2')">🎬 Demon Slayer Kimetsu no Yaiba Infinity Castle</div>
  <div class="subfolder" id="m2">
    <div class="link unlock">
      <a href="https://drive.google.com/file/d/1bdYi--odkqzKs8DWvCNNB41fpt-e8EYe/preview?usp=sharing" target="_blank">▶ ভিডিও দেখো</a> |
      <a href="https://drive.google.com/file/d/1bdYi--odkqzKs8DWvCNNB41fpt-e8EYe/view?usp=sharing" target="_blank">⬇ ডাউনলোড</a>
    </div>
  </div>

</div> <!-- #movies end -->

<!-- AI Button -->
<button id="aiBtn" onclick="toggleAI()">AI</button>
<div id="aiBox">
  <input type="text" id="aiInput" placeholder="মুভির নাম লিখুন">
  <button onclick="askAI()">Search</button>
  <div id="aiResult"></div>
</div>

<script>
const PASSWORD = "SIAM2025";
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyVYLvydsrfz9xrxZ29QizJfDL6HhynrgI7M9tQ_teql6Yz7ZQ_5n_vbpRQs6g5AcER/exec";
const OMDB_KEY = "ac57015f";

// Toggle subfolders
function toggle(id){ let e=document.getElementById(id); e.style.display=e.style.display==="block"?"none":"block"; }

// Unlock function
function unlockAll(){
  let p=document.getElementById("passInput").value;
  if(p===PASSWORD){
    localStorage.setItem("ok","1");
    document.querySelectorAll(".unlock").forEach(e=>e.style.display="block");
    document.getElementById("paymentBox").style.display="none";
    document.getElementById("searchBox").style.display="block";
    document.getElementById("aiBtn").style.display="block";
    document.querySelectorAll(".folder").forEach(f=>f.style.display="block");
  }else{
    alert("ভুল পাসওয়ার্ড");
  }
}

// Auto unlock if previously unlocked
if(localStorage.getItem("ok")){
  document.querySelectorAll(".unlock").forEach(e=>e.style.display="block");
  document.getElementById("paymentBox").style.display="none";
  document.getElementById("searchBox").style.display="block";
  document.getElementById("aiBtn").style.display="block";
  document.querySelectorAll(".folder").forEach(f=>f.style.display="block");
}

// Toggle password visibility
function togglePassword(){ let i=document.getElementById("passInput"); i.type=i.type==="password"?"text":"password"; }

// Search functionality
function searchItem(){
  let q=document.getElementById("searchBox").value.toLowerCase();
  document.querySelectorAll(".folder").forEach(item=>{
    item.style.display=item.innerText.toLowerCase().includes(q)?"block":"none";
  });
}

// Email submit
document.getElementById("emailForm").onsubmit=function(e){
  e.preventDefault();
  fetch(SCRIPT_URL,{
    method:"POST",
    body:new URLSearchParams({email:this.email.value})
  })
  .then(()=>{ alert("ধন্যবাদ 🙏 আপনার ইমেইলে দ্রুত পাসওয়ার্ড পাঠানো হবে"); })
  .catch(()=>{ alert("সমস্যা হয়েছে, পরে চেষ্টা করুন"); });
  this.reset();
};

// AI Functions
function toggleAI(){ let box=document.getElementById("aiBox"); box.style.display = box.style.display==="block"?"none":"block"; }

async function translateBN(text){
  const r = await fetch(
    `https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=bn&dt=t&q=${encodeURIComponent(text)}`
  );
  const d = await r.json();
  return d[0].map(x=>x[0]).join("");
}

async function askAI(){
  let q=document.getElementById("aiInput").value;
  if(!q) return;
  let res=document.getElementById("aiResult");
  res.innerHTML="AI চিন্তা করছে... 🤖";
  try{
    const r=await fetch(`https://www.omdbapi.com/?t=${encodeURIComponent(q)}&apikey=${OMDB_KEY}`);
    const d=await r.json();
    if(d.Response==="False"){ res.innerHTML="মুভি পাওয়া যায়নি ❌"; return; }

    let plotBN = await translateBN(d.Plot);
    let poster = d.Poster && d.Poster !== "N/A" ? d.Poster : "https://via.placeholder.com/200x300?text=No+Image";

    res.innerHTML=`
      <img src="${poster}" alt="Poster" style="max-width:100%;border-radius:8px;margin-bottom:8px">
      <b>${d.Title} (${d.Year})</b><br>
      <b>অভিনেতা:</b> ${d.Actors}<br><br>
      <b>প্লট:</b> ${plotBN}
    `;
  }catch(e){ res.innerHTML="ত্রুটি ঘটেছে ❌"; console.error(e); }
}

// Theme Functions
const themeBtn = document.getElementById("themeBtn");
function loadTheme(){
  let t = localStorage.getItem("theme");
  if(t === "dark"){ document.body.classList.add("dark"); }
}
loadTheme();

themeBtn.onclick = function(){
  document.body.classList.toggle("dark");
  let t = document.body.classList.contains("dark") ? "dark" : "light";
  localStorage.setItem("theme", t);
}
</script>
</body>
</html>
